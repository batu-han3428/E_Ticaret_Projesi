@model List<urunKategorileri>

<div class="row">
    <div class="col-md-6">
        <fieldset>
            <legend>Kategori Alanları</legend>
            @{
                if (Model.Count == 0)
                {
                    <div id="kategoriAlanlariYaziAlan">
                        <span>Kayıtlı kategori alanı bulunmamaktadır. Ürünlerinizi listelemek için lütfen kategori alanı giriniz.</span>
                    </div>
                    <div id="kategoriAlanlariButonAlan">
                        <button class="btn btn-secondary" id="kategoriAlanlariButon" data-bs-target="#kategoriAlanlariModal" data-bs-toggle="modal">
                            <div>
                                <span id="kategoriAlanlariButonYazi">Kategori Alanı Ekle</span>
                            </div>
                            <div>
                                <i class="bi bi-file-earmark-plus-fill" id="kategoriAlanlariButonIcon"></i>
                            </div>
                        </button>
                    </div>
                }
                else
                {
                    <div class="urunKategorileriDivAlan">
                        @foreach (var item in Model)
                        {
                            if (item.urunKategorileriUstId == 0)
                            {

                            <div class="urunKategorileriAlanAdlari">
                                <span>@item.urunKategorileriKategoriAdi</span>
                                <hr />
                            </div>

                            }

                        }
                    </div>
                    <div id="kategoriAlanlariButonAlan">
                        <button class="btn btn-secondary" id="kategoriAlanlariButon" data-bs-target="#kategoriAlanlariModal" data-bs-toggle="modal">
                            <div>
                                <span id="kategoriAlanlariButonYazi">Kategori Alanı Ekle</span>
                            </div>
                            <div>
                                <i class="bi bi-file-earmark-plus-fill" id="kategoriAlanlariButonIcon"></i>
                            </div>
                        </button>
                    </div>
                }
            }

        </fieldset>
    </div>
    <div class="col-md-6">
        <fieldset>
            <legend>Kategori</legend>
            <div id="kategoriAlanlariYaziAlan">
                <span>Kayıtlı kategori bulunmamaktadır. Ürünlerinizi listelemek için lütfen kategori alanı giriniz.</span>
            </div>
            <div id="kategoriAlanlariButonAlan">
                <button class="btn btn-secondary" id="kategoriAlanlariButon" data-bs-target="#kategoriModal" data-bs-toggle="modal">
                    <div>
                        <span id="kategoriAlanlariButonYazi">Kategori Ekle</span>
                    </div>
                    <div>
                        <i class="bi bi-file-earmark-plus-fill" id="kategoriAlanlariButonIcon"></i>
                    </div>
                </button>
            </div>
        </fieldset>
    </div>
    <div class="modal fade" id="kategoriAlanlariModal" data-bs-backdrop="static">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header" style="font-weight: 600; color: rgb(157, 163, 173); background-color: rgb(248, 248, 248);">
                    <h5 class="modal-title">Yeni Kategori Alanı</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="col-md-12 pb-4 text-center kategoriAlanlariModalModalBodyDiv" style="font-weight: bold; color:rgb(168, 174, 185);">
                        <span>Kategori alanı, kategorilerinizi gruplayacağınız ana alan adıdır. Örn. Elektronik > Telefon..</span>
                    </div>
                    <form class="needs-validation" novalidate id="kategoriAlanlariModalForm">
                        <div class="row g-3">
                            <div class="col-md-12">
                                <label for="kategoriAlanAdi" class="form-label">Kategori Alan Adı *</label>
                                <input id="kategoriAlanAdi" type="text" class="form-control" placeholder="Kategori Alan Adı" required>
                                <div class="invalid-feedback">
                                    Bu Alan Boş Geçilemez
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer mt-3">
                            <button class="btn btn-secondary" type="submit" id="kategoriAlanlariButonModal">Kaydet</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="kategoriModal" data-bs-backdrop="static">
        <div class="modal-dialog modal-dialog-scrollable modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="color:rgb(255, 123, 0); background-color: rgb(248, 248, 248);">
                    <h5 class="modal-title">Yeni Adres</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="col-md-12 pb-4 text-center" style="font-weight: bold; color:rgb(255, 123, 0);">
                        <span>Kurumsal bir adres olacak ise vergi no veya tckn alanlarından sadece biri dolu olmalıdır.</span>
                    </div>
                    <form class="needs-validation" novalidate id="teslimatAdresiModalForm">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="adresbasligi" class="form-label">Adres Başlığı *</label>
                                <input id="adresbasligi" type="text" class="form-control" placeholder="Adres Başlığı" required>
                                <div class="invalid-feedback">
                                    Bu Alan Boş Geçilemez
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="tckimlikno" class="form-label">TC Kimlik No *</label>
                                <input id="tckimlikno" type="text" class="form-control" placeholder="Tc No" required>
                                <div class="invalid-feedback">
                                    Bu Alan Boş Geçilemez
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="adiniz" class="form-label">Adınız *</label>
                                <input id="adiniz" type="email" class="form-control" placeholder="Adınız" required>
                                <div class="invalid-feedback">
                                    Bu Alan Boş Geçilemez
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="soyadiniz" class="form-label">Soyadınız *</label>
                                <input id="soyadiniz" type="text" class="form-control" placeholder="Soyadınız" required>
                                <div class="invalid-feedback">
                                    Bu Alan Boş Geçilemez
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="il" class="form-label">İl *</label>
                                <select id="il" class="form-select" required>
                                    <option disabled>İl Seçiniz..</option>
                                    <option>İstanbul</option>
                                    <option>Ankara</option>
                                    <option>İzmir</option>
                                </select>
                                <div class="invalid-feedback">
                                    Bu Alan Boş Geçilemez
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="ilce" class="form-label">İlçe *</label>
                                <select id="ilce" class="form-select" required>
                                    <option disabled>İlçe Seçiniz..</option>
                                    <option>Beylikdüzü</option>
                                    <option>Büyükçekmece</option>
                                    <option>Silivri</option>
                                </select>
                                <div class="invalid-feedback">
                                    Bu Alan Boş Geçilemez
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="mahalle" class="form-label">Mahalle *</label>
                                <select id="mahalle" class="form-select" required>
                                    <option disabled>Mahalle Seçiniz..</option>
                                    <option>Büyükşehir Mh.</option>
                                    <option>Barış Mh.</option>
                                    <option>Gürpınar Mh.</option>
                                </select>
                                <div class="invalid-feedback">
                                    Bu Alan Boş Geçilemez
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="adres" class="form-label">Adres *</label>
                                <textarea id="adres" class="form-control" rows="3" placeholder="Açık Adresinizi Giriniz"
                                          required></textarea>
                                <div class="invalid-feedback">
                                    Bu Alan Boş Geçilemez
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="telefon" class="form-label">Telefon *</label>
                                <input id="telefon" type="text" class="form-control" placeholder="(5xx) xxx xx xx" required>
                                <div class="invalid-feedback">
                                    Bu Alan Boş Geçilemez
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="postakodu" class="form-label">Posta Kodu</label>
                                <input id="postakodu" type="text" class="form-control" placeholder="Posta Kodu" required>
                                <div class="invalid-feedback">
                                    Bu Alan Boş Geçilemez
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Fatura Tipi *</label>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1" checked>
                                    <label class="form-check-label" for="inlineRadio1">Bireysel</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2">
                                    <label class="form-check-label" for="inlineRadio2">Kurumsal</label>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer mt-3">
                            <button class="btn btn-warning" id="teslimatAdresiButon">
                                <div>
                                    <span id="teslimatAdresiButonYazi">Kaydet</span>
                                </div>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">

    var kategoriAlanAdKontrol = 0;

    (function () {
            'use strict'


            var forms = document.querySelectorAll('.needs-validation')


            Array.prototype.slice.call(forms)
                .forEach(function (form) {
                    form.addEventListener('submit', function (event) {
                        if (!form.checkValidity()) {
                            event.preventDefault()
                            event.stopPropagation()
                        }

                        form.classList.add('was-validated')
                    }, false)
                })
    })()

    $("#kategoriAlanlariModalForm").submit(function (event) {
        event.preventDefault();

        $(".urunKategorileriAlanAdlari > span").each(function (index) {

            if ($(this).text() == $("#kategoriAlanAdi").val()) {

                kategoriAlanAdKontrol++;

                if (kategoriAlanAdKontrol < 2) {
                    $(".kategoriAlanlariModalModalBodyDiv").append('<br/><span style="color: red;">Aynı İsimde Kategori Alan Adı Ekleyemezsiniz...</span>');
                }
                    

                return false;
            } else {

                var kategoriAlan = new Object();
                kategoriAlan.urunKategorileriKategoriAdi = $("#kategoriAlanAdi").val();

                var kategoriAlanAdiKaydet = "@Url.Action("ustKategoriEkle", "kategoriAlanlari")";

                if (kategoriAlan.urunKategorileriKategoriAdi != "") {
                    $.ajax({
                        url: kategoriAlanAdiKaydet,
                        type: "POST",
                        data: kategoriAlan,
                        success: function (response) {


                            $("#kategoriAlanlariModal").modal('hide');

                            setTimeout(function () {

                                $("#eeee").html(response);


                            }, 500);

                        },
                        error: function (hata, ajaxoptions, throwerror) {
                            alert("Hata :" + hata.status + " " + throwerror + " " + hata.responseText);
                        }
                    });

                    return false;
                }
            }

        });

    });
</script>